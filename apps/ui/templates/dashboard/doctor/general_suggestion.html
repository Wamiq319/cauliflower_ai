{% extends "dashboard/doctor/base_doctor.html" %} {% block dashboard_content %}

<div class="flex flex-col items-center mb-8">
  <span class="text-7xl mb-2">💡</span>
  <h1 class="text-3xl font-extrabold text-blue-800 mb-2">
    General Suggestions
  </h1>
  <p class="text-lg text-blue-700 text-center">
    Provide general advice and recommendations for cauliflower disease
    management.
  </p>
</div>

<!-- General Suggestion Form -->
<div class="bg-white rounded-2xl shadow p-6 mb-8">
  <h2 class="text-xl font-bold text-blue-800 mb-6 flex items-center gap-2">
    <span>📝</span> Create General Suggestion
  </h2>

  <form method="POST" class="space-y-6">
    {% csrf_token %}

    <!-- Disease Type -->
    <div>
      <label class="block text-blue-700 font-semibold mb-2">
        Disease Type
      </label>
      <select
        name="disease_type"
        class="w-full px-4 py-3 rounded-lg border border-blue-200 focus:ring-2 focus:ring-blue-700 focus:outline-none transition"
        required
      >
        <option value="">Select disease type</option>
        <option value="black_rot">Black Rot</option>
        <option value="downy_mildew">Downy Mildew</option>
        <option value="bacterial_spot">Bacterial Spot</option>
        <option value="clubroot">Clubroot</option>
        <option value="general">General Care</option>
      </select>
    </div>

    <!-- Suggestion Title -->
    <div>
      <label class="block text-blue-700 font-semibold mb-2">
        Suggestion Title
      </label>
      <input
        type="text"
        name="title"
        class="w-full px-4 py-3 rounded-lg border border-blue-200 focus:ring-2 focus:ring-blue-700 focus:outline-none transition"
        placeholder="Enter a descriptive title for this suggestion..."
        required
      />
    </div>

    <!-- Treatment Recommendations -->
    <div>
      <label class="block text-blue-700 font-semibold mb-2">
        Treatment Recommendations
      </label>
      <textarea
        name="treatment"
        rows="4"
        class="w-full px-4 py-3 rounded-lg border border-blue-200 focus:ring-2 focus:ring-blue-700 focus:outline-none transition"
        placeholder="Provide detailed treatment recommendations..."
        required
      ></textarea>
    </div>

    <!-- Prevention Measures -->
    <div>
      <label class="block text-blue-700 font-semibold mb-2">
        Prevention Measures
      </label>
      <textarea
        name="prevention"
        rows="4"
        class="w-full px-4 py-3 rounded-lg border border-blue-200 focus:ring-2 focus:ring-blue-700 focus:outline-none transition"
        placeholder="Suggest preventive measures..."
        required
      ></textarea>
    </div>

    <!-- Best Practices -->
    <div>
      <label class="block text-blue-700 font-semibold mb-2">
        Best Practices
      </label>
      <textarea
        name="best_practices"
        rows="3"
        class="w-full px-4 py-3 rounded-lg border border-blue-200 focus:ring-2 focus:ring-blue-700 focus:outline-none transition"
        placeholder="Additional best practices and tips..."
      ></textarea>
    </div>

    <!-- Priority Level -->
    <div>
      <label class="block text-blue-700 font-semibold mb-2">
        Priority Level
      </label>
      <select
        name="priority"
        class="w-full px-4 py-3 rounded-lg border border-blue-200 focus:ring-2 focus:ring-blue-700 focus:outline-none transition"
        required
      >
        <option value="">Select priority level</option>
        <option value="low">Low - General information</option>
        <option value="medium">Medium - Important for prevention</option>
        <option value="high">High - Critical for disease management</option>
      </select>
    </div>

    <!-- Action Buttons -->
    <div class="flex gap-4 pt-4">
      <button
        type="submit"
        class="px-6 py-3 bg-blue-700 text-white rounded-lg shadow hover:bg-blue-800 transition font-semibold"
      >
        💾 Save Suggestion
      </button>
      <button
        type="button"
        onclick="history.back()"
        class="px-6 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition font-semibold"
      >
        ❌ Cancel
      </button>
    </div>
  </form>
</div>

<!-- Past Suggestions Display -->
<div class="bg-white rounded-2xl shadow p-6">
  <h2 class="text-xl font-bold text-blue-800 mb-6 flex items-center gap-2">
    <span>📊</span> Past Suggestions
  </h2>

  <div class="space-y-6">
    {% for suggestion in past_suggestions %}
    <div class="border border-blue-200 rounded-lg p-6 bg-blue-50">
      <div class="flex justify-between items-start mb-4">
        <div>
          <h3 class="text-lg font-bold text-blue-800 mb-1">
            {{ suggestion.disease }}
          </h3>
          <p class="text-sm text-blue-600">
            Created: {{ suggestion.created_at }}
          </p>
        </div>
        <span
          class="px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800"
        >
          ID: {{ suggestion.id }}
        </span>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <h4 class="font-semibold text-blue-700 mb-2">Treatment</h4>
          <p class="text-gray-700 text-sm">{{ suggestion.treatment }}</p>
        </div>
        <div>
          <h4 class="font-semibold text-blue-700 mb-2">Prevention</h4>
          <p class="text-gray-700 text-sm">{{ suggestion.prevention }}</p>
        </div>
      </div>
    </div>
    {% empty %}
    <div class="text-center py-8">
      <div class="text-6xl mb-4">📝</div>
      <p class="text-blue-700 text-lg">No suggestions created yet!</p>
      <p class="text-blue-600">
        Create your first suggestion using the form above.
      </p>
    </div>
    {% endfor %}
  </div>
</div>

{% endblock %}
